gitea:
  ingress:
    enabled: true
    className: traefik
    annotations:
      kubernetes.io/ingress.class: "traefik"
      traefik.ingress.kubernetes.io/router.entrypoints: "websecure"
    hosts:
      - host: gitea.mabecenter.org  # El dominio donde se accederá a gitea
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: tls-cert  # Certificado TLS para la conexión segura
        hosts:
          - gitea.mabecenter.org
        
  gitea:
    admin:
      existingSecret: gitea-admin-secret
  config:
      storage:
        STORAGE_TYPE: "minio"
        MINIO_ENDPOINT: "minio.minio.svc.cluster.local:9000"
        MINIO_ACCESS_KEY_ID: "minioadmin"
        MINIO_SECRET_ACCESS_KEY: "minio123"
        MINIO_BUCKET: "gitea"
        MINIO_LOCATION: "us-east-1"
        MINIO_USE_SSL: false

  deployment:
    env:
      - name: MINIO_ACCESS_KEY_ID
        valueFrom:
          secretKeyRef:
            name: gitea-minio-config
            key: MINIO_ACCESS_KEY_ID

      - name: MINIO_SECRET_ACCESS_KEY
        valueFrom:
          secretKeyRef:
            name: gitea-minio-config
            key: MINIO_SECRET_ACCESS_KEY

    