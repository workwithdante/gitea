gitea:
  ingress:
    enabled: true
    ingressClassName: "traefik"  # Usar Traefik como controlador de Ingress
    annotations:
      kubernetes.io/ingress.class: "traefik"
    hosts:
      - host: gitea.mabecenter.org  # El dominio donde se accederá a gitea
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: tls-cert  # Certificado TLS para la conexión segura
        hosts:
          - gitea.mabecenter.org
        
  gitea:
    admin:
      existingSecret: gitea-admin-secret
    config:
      storage:
        STORAGE_TYPE: "minio"
        MINIO_ENDPOINT: "minio.minio.svc.cluster.local:9000"
        MINIO_BUCKET: "gitea"
        MINIO_LOCATION: "us-east-2"
        MINIO_USE_SSL: false
          
  deployment:
    env:
      - name: STORAGE_TYPE
        valueFrom:
          secretKeyRef:
            name: gitea-minio-config
            key: STORAGE_TYPE

      - name: MINIO_ENDPOINT
        valueFrom:
          secretKeyRef:
            name: gitea-minio-config
            key: MINIO_ENDPOINT

      - name: MINIO_ACCESS_KEY_ID
        valueFrom:
          secretKeyRef:
            name: gitea-minio-config
            key: MINIO_ACCESS_KEY_ID

      - name: MINIO_SECRET_ACCESS_KEY
        valueFrom:
          secretKeyRef:
            name: gitea-minio-config
            key: MINIO_SECRET_ACCESS_KEY

      - name: MINIO_BUCKET
        valueFrom:
          secretKeyRef:
            name: gitea-minio-config
            key: MINIO_BUCKET

      - name: MINIO_LOCATION
        valueFrom:
          secretKeyRef:
            name: gitea-minio-config
            key: MINIO_LOCATION

      - name: MINIO_USE_SSL
        valueFrom:
          secretKeyRef:
            name: gitea-minio-config
            key: MINIO_USE_SSL